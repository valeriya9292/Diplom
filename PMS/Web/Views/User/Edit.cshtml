@using BLL.DomainModel.Enums
<script type="text/html" id="ko-editUser">
    <div class="css-link">
        <a data-bind="event: { click: function(){$parent.isEditOpen(false);}}">Back</a>
    </div>

    <fieldset class="createForm">
        <legend>User</legend>
        <label class="error" data-bind="text: $parent.errorMsg"></label>
        <form enctype="multipart/form-data" id="createForm" data-bind="submit: $parent.submitEdit">
            <input type="hidden" name="Id" data-bind="value:Id" />
            <p>
                <label for="FirstName">First Name</label>
                <input id="FirstName" name="FirstName" type="text" data-bind="value:FirstName" />
            </p>
            <p>
                <label for="LastName">Last Name</label>
                <input name="LastName" type="text" data-bind="value:LastName" />
            </p>
            <p>
                <label for="Login">Login</label>
                <input id="Login" name="Login" type="text" data-bind="value:Login" readonly="readonly" class="disabled" disabled="disabled" />
                <input type="hidden" id="Login" name="Login" data-bind="value:Login" />
            </p>
            <p>
                <label for="Password">Password</label>
                <input id="Password" name="Password" type="password" data-bind="value:Password" />
            </p>
            <p>
                <label for="ConfirmPassword">Confirm password</label>
                <input id="ConfirmPassword" name="ConfirmPassword" type="password" data-bind="value:ConfirmPassword" />
            </p>
            <p>
                <label for="Email">Email</label>
                <input id="Email" name="Email" type="text" data-bind="value:Email" />
            </p>
            <p>
                <label for="Birthday">Birthday</label>
                <input type="text" id="Birthday" name="Birthday" readonly="readonly" data-bind="value:Birthday">
            </p>
            <p>
                <label for="Phone">Phone</label>
                <input id="Phone" name="Phone" type="text" data-bind="value:Phone" />
            </p>
            <p>
                <label for="Skype">Skype</label>
                <input id="Skype" name="Skype" type="text" data-bind="value:Skype" />
            </p>
            <p>
                <label for="Role">Role</label>
                @{
                    Role role;
                    Enum.TryParse(Roles.GetRolesForUser(User.Identity.Name).FirstOrDefault(), out role);
                    if (role == Role.Admin || role == Role.ProjectManager)
                    {
                        <select id="Role" name="Role" data-bind="options: $parent.roles, optionsText: 'roleName', optionsValue: 'roleId', value: Role"></select>
                    }
                    else
                    {
                        <input type="text" data-bind="value: Role" name="Role" readonly="readonly" class="disabled">
                    }
                }

            <p>

                <label for="Avatar">Add Avatar</label>
                <input id="Avatar" name="Avatar" type="file" value="" />
                <label class="fileErrorlabel"></label>
            </p>
            <p>
                <input type="submit" value="Save" class="formbutton" />
            </p>
        </form>
    </fieldset>
</script>